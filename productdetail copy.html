<!--
 * @Author: zk.zhouyf
 * @Date: 2023-08-22 02:20:00
 * @LastEditors: zk.zhouyf
 * @LastEditTime: 2023-08-22 02:20:00
 * @FilePath: \care\productdetail copy.html
 * @Description: 
 * 
 * Copyright (c) 2023 by zk.zhouyf, All Rights Reserved. 
-->
<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,viewport-fit=cover, initial-scale=1.0, maximum-scale=1.0,user-scalable=0" />
		<meta name="applicable-device" content="pc,mobile"/>
		<meta name="apple-mobile-web-app-capable" content="yes"/>
		<meta name="apple-touch-fullscreen" content="yes"/>
		<meta name="apple-mobile-web-app-status-bar-style" content="black"/>
		<meta name="format-detection" content="telephone=no"/>
		<meta http-equiv="X-UA-Compatible" content="edge">
		<meta name="x5-fullscreen" content="true">
		<meta name="full-screen" content="yes">
		<meta name="wap-font-scale" content="no">
		<script src="js/flexible.js"></script>
		<title>智慧居家养老平台</title>
		<link rel="apple-touch-icon" type="image/jpg" href="">
		<link rel="icon" type="image/jpg" href="">
	    <link rel="stylesheet" href="css/iconfont.css" />
	    <link rel="stylesheet" href="css/swiper.min.css" />
		<link rel="stylesheet" href="css/base.css" />
		<style>
			
		</style>
	</head>

	<body>
		<div class="container itemBanner">
			<div class="picbanner">
				<a href="javascript:history.go(-1)" class="iconfont picbanner-back">&#xe65f;</a>
				<div class="swiper-container gallery">
					<div class="my-gallery swiper-wrapper">
					    <div class="swiper-slide" onclick="bigImg(this)" data-src="images/veer-130812528_r2_c2.jpg" style="background-image: url(images/veer-130812528_r2_c2.jpg);">			
							<img src="images/veer-130812528_r2_c2.jpg" />	    	
					    </div>
					    <div class="swiper-slide" onclick="bigImg(this)" data-src="images/veer-130812528_r2_c2.jpg" style="background-image: url(images/veer-130812528_r2_c2.jpg);">			
					  		<img src="images/veer-130812528_r2_c2.jpg" />	
					    </div>
					    <div class="swiper-slide" onclick="bigImg(this)" data-src="images/veer-130812528_r2_c2.jpg" style="background-image: url(images/veer-130812528_r2_c2.jpg);">			
						    <img src="images/veer-130812528_r2_c2.jpg" />	
					    </div>
					</div>
					<div class="swiper-pagination"></div>
				</div> 
			</div>
			<div class="contentBox contentBoxcet mt20">
				<section class="detail-section">
					<div class="inner_title inner_title_bes serviceBox">
						<div class="detail_l">
							<b class="detailprice-tips">&yen;</b>
							<h6 class="detailprice">3200.00</h6>
						</div>
						<div class="detail_r">4W+次下单</div>
					</div>
					<div class="inner_title inner_title_bes serviceBox">
						<div class="mus-mark"><b class="mark-zt">三天/周</b></div>
						<div class="mus-mark"><b class="mark-zt">满100减10</b></div>
					</div>
					<div class="inner_title inner_title_bes serviceBox">
						<div class="detail-name">轻度照护 每次2小时  每周3次  共4周</div>
					</div>
				</section>
			</div>
			<div class="contentBox contentBoxset mt20">
				<div class="serviceBox">
					<h3>包含内容</h3>
				</div>
				<div class="inner_title inner_title_ses">
					<div class="jes_box">
						<div class="inner_r2 message">
							<a><span class="item-bold">卧床/术后老人全天照护单次（8小时）</span><span>单次全天照护8小时30次</span></a>
						</div>
					</div>
				</div>
			</div>
			<div class="contentBox contentBoxset mt20">
				<div class="serviceBox">
					<h3>关联商品</h3>
				</div>
				<div class="inner_title inner_title_ses">
					<div class="jes_box">
						<div class="inner_r2 message">
							<div class="pic_goods">
								<div class="swiper-container gallery">
									<div class="my-gallery swiper-wrapper">
										<div class="swiper-slide">			
											<img src="images/veer-130812528_r2_c2.jpg" />
											<div class="pic_goods_name">轻度照护 每次2小时  每周3次  共4周</div>
											<div class="pic_goods_price">&yen;3200.00</div>
											<div class="pic_goods_buy">
												<div class="pic_goods_btn">立即购买</div>
											</div>
										</div>
									    <div class="swiper-slide">			
									  		<img src="images/veer-130812528_r2_c2.jpg" />
											<div class="pic_goods_name">轻度照护 每次2小时  每周3次  共4周</div>
											<div class="pic_goods_price">&yen;3200.00</div>
											<div class="pic_goods_buy">
												<div class="pic_goods_btn">立即购买</div>
											</div>
									    </div>
									    <div class="swiper-slide">			
										    <img src="images/veer-130812528_r2_c2.jpg" />
											<div class="pic_goods_name">轻度照护 每次2小时  每周3次  共4周</div>
											<div class="pic_goods_price">&yen;3200.00</div>
											<div class="pic_goods_buy">
												<div class="pic_goods_btn">立即购买</div>
											</div>
									    </div>
									    <div class="swiper-slide">			
											<img src="images/veer-130812528_r2_c2.jpg" />
											<div class="pic_goods_name">轻度照护 每次2小时  每周3次  共4周</div>
											<div class="pic_goods_price">&yen;3200.00</div>
											<div class="pic_goods_buy">
												<div class="pic_goods_btn">立即购买</div>
											</div>
									    </div>
									    <div class="swiper-slide">			
									  		<img src="images/veer-130812528_r2_c2.jpg" />
											<div class="pic_goods_name">轻度照护 每次2小时  每周3次  共4周</div>
											<div class="pic_goods_price">&yen;3200.00</div>
											<div class="pic_goods_buy">
												<div class="pic_goods_btn">立即购买</div>
											</div>
									    </div>
									    <div class="swiper-slide">			
										    <img src="images/veer-130812528_r2_c2.jpg" />
											<div class="pic_goods_name">轻度照护 每次2小时  每周3次  共4周</div>
											<div class="pic_goods_price">&yen;3200.00</div>
											<div class="pic_goods_buy">
												<div class="pic_goods_btn">立即购买</div>
											</div>
									    </div>
									</div>
								</div> 
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="contentBox contentBoxset mt20">
				<div class="serviceBox">
					<h3>评价<span>（10万+）</span></h3>
					<span>好评率99.96%</span>
				</div>
				<div class="inner_title inner_title_ses">
					<div class="jes_box">
						<div class="inner_r2 message">
							<div>
								<div class="commentLi">
									<a href="userinfo.html?name=慕" class="commentIcon">
										<img src="images/list.png">
									</a>
									<div class="commentWrap">
										<div class="commentName">
											<span>慕</span>
											<div class="commentDate">发布于 2020-03-31</div>
										</div>
										<div class="commentMarks">
											<div class="commentStars">
												<ul class="commentStarUl">
													<li>★</li>
													<li>★</li>
													<li>★</li>
													<li>★</li>
													<li>★</li>
												</ul>
												<ul class="commentStars_ul" style="width: 80%;">
													<li>★</li>
													<li>★</li>
													<li>★</li>
													<li>★</li>
													<li>★</li>
												</ul>
											</div>
											<div class="marks_count">4.0</div>
										</div>
										<div class="commentInfo">
											玛歌2004 温柔的霜糖黑莓香气下，藏的是凌厉的线条感，修长的、笔直的、干净的果味就像月光下的剪影，清晰且明亮。 圆润的酒体，轻盈像溪流飘过舌苔，留下细细的单宁和愉悦的果酸。 并不以强劲与浓郁，而以优雅与克制擅胜，使人暗暗记下恰好适饮的玛歌是如此好喝，远比好年份却不适饮的玛歌让人开心。 评分：92分
										</div>
										<div class="commentImg">
											<img class="list-img" onclick="bigImg(this)" data-src="https://img14.360buyimg.com/mobilecms/s270x270_jfs/t1/130511/28/23909/478912/620c9c87Eb591c09a/013d8e8c3d754aae.jpg!q70.dpg.webp" src="https://img14.360buyimg.com/mobilecms/s270x270_jfs/t1/130511/28/23909/478912/620c9c87Eb591c09a/013d8e8c3d754aae.jpg!q70.dpg.webp">
											<img class="list-img" onclick="bigImg(this)" data-src="https://img14.360buyimg.com/mobilecms/s270x270_jfs/t1/167730/3/29061/264674/6245db61Eb5530cac/5a9f1cd071eea136.jpg!q70.dpg.webp" src="https://img14.360buyimg.com/mobilecms/s270x270_jfs/t1/167730/3/29061/264674/6245db61Eb5530cac/5a9f1cd071eea136.jpg!q70.dpg.webp">
											<img class="list-img" onclick="bigImg(this)" data-src="https://img14.360buyimg.com/mobilecms/s270x270_jfs/t1/105952/25/25938/159711/624478aeEb494d2db/59d8e61a0c9adead.jpg!q70.dpg.webp" src="https://img14.360buyimg.com/mobilecms/s270x270_jfs/t1/105952/25/25938/159711/624478aeEb494d2db/59d8e61a0c9adead.jpg!q70.dpg.webp">
											<img class="list-img" onclick="bigImg(this)" data-src="https://img14.360buyimg.com/mobilecms/s270x270_jfs/t1/130511/28/23909/478912/620c9c87Eb591c09a/013d8e8c3d754aae.jpg!q70.dpg.webp" src="https://img14.360buyimg.com/mobilecms/s270x270_jfs/t1/130511/28/23909/478912/620c9c87Eb591c09a/013d8e8c3d754aae.jpg!q70.dpg.webp">
											<img class="list-img" onclick="bigImg(this)" data-src="https://img14.360buyimg.com/mobilecms/s270x270_jfs/t1/167730/3/29061/264674/6245db61Eb5530cac/5a9f1cd071eea136.jpg!q70.dpg.webp" src="https://img14.360buyimg.com/mobilecms/s270x270_jfs/t1/167730/3/29061/264674/6245db61Eb5530cac/5a9f1cd071eea136.jpg!q70.dpg.webp">
											<img class="list-img" onclick="bigImg(this)" data-src="https://img14.360buyimg.com/mobilecms/s270x270_jfs/t1/105952/25/25938/159711/624478aeEb494d2db/59d8e61a0c9adead.jpg!q70.dpg.webp" src="https://img14.360buyimg.com/mobilecms/s270x270_jfs/t1/105952/25/25938/159711/624478aeEb494d2db/59d8e61a0c9adead.jpg!q70.dpg.webp">
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="contentBox contentBoxset mt20">
				<div class="serviceBox">
					<h3>产品详情</h3>
				</div>
				<div class="inner_title inner_title_ses">
					<div class="jes_box">
						<div class="inner_r2 message">
							<img src="images/hot.png" />
						</div>
					</div>
				</div>
			</div>
			<div class="s-actionBar">
		  		<div class="action-bar">
		  			<div class="trade-bar" onclick="buy()">
		  				立即购买
		  			</div>
		  		</div>
		  	</div>
		</div>

	
		<script type="text/javascript" src="js/jquery-3.1.1.min.js"></script>
		<script type="text/javascript" src="js/jquery-weui.min.js" ></script>
		<script type="text/javascript" src="js/swiper.min.js" ></script>

		<script type="module">
			const buy = () => {

			};

			let result1 = [{
				"oldType": [
					{
						"name": "自理",
						"id": "205001",
						"price": 45.00
					},
					{
						"name": "半自理",
						"id": "205002",
						"price": 50.00
					},
					{
						"name": "卧床",
						"id": "205003",
						"price": 55.00
					}
				],
				"time": [
					{
						"name": "2小时/次",
						"id": "305001",
						"num": 2
					},
					{
						"name": "3小时/次",
						"id": "305002",
						"num": 3
					},
					{
						"name": "8小时/次",
						"id": "305003",
						"num": 7.45
					}
				],
				"frequency": [
					{
						"name": "3次/周",
						"id": "405001",
						"num": 3
					},
					{
						"name": "5次/周",
						"id": "405002",
						"num": 5
					},
					{
						"name": "7次/周",
						"id": "405003",
						"num": 7
					}
				],
				"cycle": [
				{
						"name": "1个月",
						"id": "505001",
						"num": 1
					},
					{
						"name": "3个月(推荐)",
						"id": "505002",
						"num": 2.85
					}
				]
			}];

			let result = [
				{
					"type": 1,
					"name": "老人类型",
					"id": "10010",
					"list": [
						{
							"id": "100101",
							"name": "自理",
							"num": 45
						},
						{
							"id": "100102",
							"name": "半自理",
							"num": 50
						},
						{
							"id": "100103",
							"name": "卧床",
							"num": 55
						}
					]
				}, {
					"type": 2,
					"name": "时长",
					"id": "20010",
					"list": [
						{
							"id": "200101",
							"name": "2小时/次",
							"num": 2
						},
						{
							"id": "200102",
							"name": "3小时/次",
							"num": 3
						},
						{
							"id": "200103",
							"name": "8小时/次",
							"num": 7.45
						}
					]
				}, {
					"type": 3,
					"name": "频次",
					"id": "30010",
					"list": [
						{
							"id": "300101",
							"name": "3次/周",
							"num": 3
						},
						{
							"id": "300102",
							"name": "5次/周",
							"num": 5
						},
						{
							"id": "300103",
							"name": "7次/周",
							"num": 7
						}
					]
				}, {
					"type": 4,
					"name": "周期",
					"id": "40010",
					"list": [
						{
							"id": "400101",
							"name": "1个月",
							"num": 1
						},
						{
							"id": "400102",
							"name": "3个月(推荐)",
							"num": 2.85
						}
					]
				}
			];
			

			const specificationsDialog = (options) => {

				class StyleSheet {
					constructor() {
						this.styles = {};
					}

					addStyle(selector, properties) {
						this.styles[selector] = properties;
					}

					applyStyles() {
						const styleTag = document.createElement("style");
						document.head.appendChild(styleTag);
						const styleSheet = styleTag.sheet;

						for (const selector in this.styles) {
							const rule = `${selector} { ${this.styleToString(this.styles[selector])} }`;
							styleSheet.insertRule(rule, styleSheet.cssRules.length);
						}
					}

					styleToString(style) {
						return Object.entries(style)
							.map(([property, value]) => `${property}: ${value}`)
							.join("; ");
					}
				};

				const totalArr = [];

				const styles = new StyleSheet();
				const elementTag = typeof HTMLDialogElement === 'function' ? 'dialog' : 'div';
				const dialog = document.createElement(elementTag);
				const div = document.createElement("div");
				const h2 = document.createElement("h2");
				const dl = document.createElement("dl");
				const div3 = document.createElement("div");
				document.body.appendChild(dialog);
				dialog.appendChild(div);
				div.appendChild(h2);
				div.appendChild(dl);
				div.appendChild(div3);
				dialog.className = 'dialog';
				div.className = 'session';
				// div3.className = 'btn';
				if (elementTag === 'dialog') {
					dialog.show();
				}
				h2.innerText = options.title || "";
				dl.innerHTML = options.content || "";
				div3.textContent = options.confirmButtonText || "";

				console.log(options.data)

				const result = options.data || [];

				const html = result.map((item, index) => {

					if (item.list.length > 0) {
						return `<dt><span>${item.name}</span></dt>

								<dd data-num="${item.list[0].num}">
									${
										item.list.map((v, s) => {
											return `<label class="clickable" data-name="${v.name}" data-id="${v.id}" data-num="${v.num}"><span>${v.name}</span></label>`;
										}).join("")
									}
								</dd>`;
					} else {
						return `<dt><span>${item.name}</span></dt>`;
					}
							
				});

				dl.innerHTML = html.join("");
				
				var sum = 1;

				const total = (status, num) => {//alert(num)

					// sum = 1;

					// if (status) {
					// 	const ddDom = document.querySelectorAll('.session dd');
					// 	ddDom.forEach(function(element) {
					// 		sum = 1;
					// 	})
					// } else {
						const ddDom = document.querySelectorAll('.session dd');
						ddDom.forEach(function(element) {
							sum *= parseFloat(element.getAttribute("data-num"));
							console.log(element.getAttribute("data-num"))
							// console.log(num)
						})
					// }
					
					console.log(sum)

				};

				var selectedSpec = null;
				var totalPrice = 0;

				function updateTotalPrice() {
				if (selectedSpec) {
					totalPrice = selectedSpec.num;
					// console.log('Selected Spec:', selectedSpec.size, selectedSpec.color);
				} else {
					totalPrice = 0;
					// console.log('No spec selected');
				}					console.log('Total Price: $' + totalPrice.toFixed(2));
				}

				updateTotalPrice();

				(() => {

					const ddDom = document.querySelectorAll('.session dd');
					ddDom.forEach(function(element) {
						element.firstElementChild.classList.add('select');
						sum *= parseFloat(element.getAttribute('data-num'));
						
					});
					console.log(sum)
						
				})()

				const chooseTap = document.querySelectorAll('.session dd .clickable');
				chooseTap.forEach(function(element) {
					element.addEventListener('click', function() {
						// console.log(element)
						// console.log(this.getAttribute("data-name"))
						// console.log(this.getAttribute("data-id"))
						// console.log(this.getAttribute("data-num"))
						// total(element.classList.contains('select'), element.getAttribute("data-num"));
						// console.log(element.getAttribute("data-num"))
						selectedSpec = element;
						updateTotalPrice();
						if (element.classList.contains('select')) {
							element.classList.remove('select');
							$(element).siblings().removeClass('select');
							// element.parentElement.setAttribute("data-num", 1);
							// sum *= parseFloat(element.getAttribute('data-num'));
							// alert(sum)
						} else {
							element.classList.add('select');
							$(element).siblings().removeClass('select');
							// element.parentElement.setAttribute("data-num", element.getAttribute("data-num"));
							// sum *= parseFloat(element.getAttribute('data-num'));
							// console.log(sum)
						}
						
						// element.parentElement.setAttribute("data-num", element.getAttribute("data-num"));
						// sum = parseFloat(sum*element.getAttribute('data-num'));
						// console.log(sum)
					})
				});


				styles.addStyle(".dialog", {
					'position': 'fixed',
					'background-color': 'rgba(0, 0, 0, .7)',
					'width': `${window.innerWidth}px`,
					'height': `${window.innerHeight}px`,
					'left': '0',
					'top': '0',
					'z-index': '1000000',
					'color': '#333333',
					'font-size': '0px',
					'padding': '0',
					'margin': '0',
					'border': '0',
					'outline': '0',
					'border-radius': '0',
					'transform': 'none',
					'box-shadow': '0'
				});

				styles.addStyle(".dialog .session", {
					'width': `${window.innerWidth*.9}px`,
					'height': `${window.innerHeight*.8}px`,
					'position': 'fixed',
					'transform': 'translate(-50%, -50%)',
					'left': '50%',
					'top': '50%',
					'z-index': '1000001',
					'background-color': '#FFFFFF',
					'border-radius': '10px'
				});

				styles.addStyle(".dialog h2", {
					'display': 'flex',
					'align-items': 'center',
					'font-size': '20px',
					'font-weight': 'bold',
					'padding': '10px 15px'
				});

				styles.addStyle(".dialog dl", {
					'font-size': '14px',
					'padding': '0 15px'
				});

				styles.addStyle(".dialog dt", {
					'color': '#c5c5c5',
					'margin-bottom': '10px'
				});

				styles.addStyle(".dialog dd", {
					'color': '#222222',
					'margin-bottom': '10px',
					'display': 'flex',
					'flex-wrap': 'wrap'
				});

				styles.addStyle(".dialog dd label", {
					'width': `${(window.innerWidth*.9 - 50)/3}px`,
					'margin-right': '10px',
					'margin-bottom': '10px',
					'position': 'relative',
					'display': 'flex',
					'justify-content': 'center',
					'align-items': 'center',
					'height': '30px',
					'border': '.5px solid #dedede',
					'box-sizing': 'border-box',
					'border-radius': '6px'
				});

				styles.addStyle(".dialog dd label.select", {
					'color': '#ed8439',
					'border': '.5px solid #ed8439',
					'box-sizing': 'border-box',
					'background-color': '#f9f2d4',
					'width': `${(window.innerWidth*.9 - 50)/3}px`,
					'height': '30px',
					'border-radius': '6px'
				});

				styles.addStyle(".dialog dd label span", {
					'position': 'absolute',
					'font-size': '14px',
					'width': '100%',
					'height': '100%',
					'display': 'flex',
					'justify-content': 'center',
					'align-items': 'center'
				});

				styles.addStyle(".dialog dd label:nth-child(3n)", {
					'margin-right': '0px'
				});

				styles.addStyle(".dialog dd label:nth-last-child(1)", {
					'margin-bottom': '0px'
				});

				styles.addStyle(".dialog dd label:nth-last-child(2)", {
					'margin-bottom': '0px'
				});

				styles.addStyle(".dialog dd label:nth-last-child(3)", {
					'margin-bottom': '0px'
				});

				styles.applyStyles();
			};


			specificationsDialog({
				title: '居家养老',
				content: `<p>账号异常，请联系客服</p><p>400-1518-518</p>`,
				confirmButtonText: '',
				data: result,
				onConfirm: function () {
					// 
				},
			})
		</script>
		<script>
			var galleryTop = new Swiper('.picbanner .swiper-container', {
    			effect : 'fade',
		        pagination: {
		          	el: ".picbanner .swiper-pagination",          	
			    	clickable :true		    	
		        },
		        observer:true,//修改swiper自己或子元素时，自动初始化swiper
	    		observeParents:true,//修改swiper的父元素时，自动初始化swiper
		    });
		    
		    var galleryGood = new Swiper('.pic_goods .swiper-container', {
		    	slidesPerView: 3,
		        spaceBetween: 10,
		        freeMode: true,
		        observer:true,//修改swiper自己或子元素时，自动初始化swiper
	    		observeParents:true,//修改swiper的父元素时，自动初始化swiper
		    });
		    
		    // 查看大图
			function bigImg(res) {
				var big_img = `<div class="big_img" onclick="closeDialogImg(this)">
				    <div class="swiper-container2">
				      <div class="swiper-wrapper"></div>
				    </div>
				    <div class="swiper-pagination2"></div>				    
				</div>`;
				$("body").append(big_img);
				var mySwiper = new Swiper('.swiper-container2', {
					loop: false,
					pagination: '.swiper-pagination2',
					paginationType: 'fraction'
				});
				var imgSrc = $(res).data("src");
				var imgBox = $(res).parent().children();
				var i = $(imgBox).index(res);
				$(".big_img .swiper-wrapper").empty();
				$(".big_img").css({
					"z-index": 1001,
					"opacity": "1",
					"transition": "0.5s all ease-in"
				});

				for(var j = 0, c = imgBox.length; j < c; j++) {
					$(".big_img .swiper-wrapper").append(`<div class="swiper-slide">
		        		<div class="cell">
		        			<img src=${imgBox.eq(j).data("src")} />
		        		</div>
	        		</div>`);
//					mySwiper.updateSlidesSize();
//					mySwiper.updatePagination();

					$(".big_img .cell img").animate({
						width: $(window).width()
					}, 500)
					mySwiper.slideTo(i, 0, false);

				}

				return false;
			}

			// 关闭大图
			function closeDialogImg(res) {
				$(".big_img .cell img").animate({
					width: 0
				}, 500)
				$(".big_img").css({
					"z-index": "-1",
					"opacity": "0",
					"transition": "0.5s all ease-in"
				});
				setTimeout(()=>{					
					$(res).remove();
				},500)
			}
			
		</script>
		<!--<script type="text/javascript" src="js/jweixin-1.0.0.js" ></script>
		<script type="text/javascript" src="js/swiper.min.js"></script>
		<script type="text/javascript" src="js/slider.js"></script>
		<script type="text/javascript" src="js/common.js"></script>-->
		<!--<script>

			//轮播图
	        var client=$(document.body)[0].clientWidth;    
	        var galleryTop = new Swiper('.picbanner .swiper-container', {
		        pagination: '.picbanner .swiper-pagination',
    			paginationType: 'fraction',
				onTouchEnd: function(swiper){
			        dis=client*($('.my-gallery .swiper-slide').length-1)+70
			        TR=swiper.translate
			        if(TR<-dis){
				        swiper.setWrapperTranslate(TR);
				        $(".itemtarget").trigger('click');
			        }
			    }
		    });
			
			$(function() {
				
				var objitem = new floor('#wineHead .cateItem_active','.floorscroll');
				objitem.init()
				
				$(window).on('scroll',function() {
					var v=($(this).scrollTop())/100;
					$('#wineHead').css('background-color','rgba(255, 255, 255,'+v+')');
					$('#itemDetailTitle').css('color','rgba(153, 153, 153,'+v+')');
					$('#itemDetailTitle .currentitem').css("border-bottom","2px solid rgba(153,153,153,"+v+")");
				})
				
				var TouchNav = new Swiper('#TouchNav', {
					freeMode: false,
					freeModeMomentumRatio: 0.5,
					slidesPerView: 'auto',
					onInit: function(swiper){
						var H = $(".fall-box").eq(swiper.clickedIndex).height();
						$("#TouchInfo .swiper-slide.swiper-slide-active").css('height', H + 'px');
						$("#TouchInfo .swiper-wrapper").css('height', H + 'px');
					},
					onTap: function(swiper){
						TouchNav.setWrapperTransition(300);
						$("#TouchNav .active").removeClass('active');
						$("#TouchNav .swiper-slide").eq(swiper.clickedIndex).addClass('active');
						TouchInfo.slideTo(swiper.clickedIndex);
					}
				});
				
				var TouchInfo = new Swiper('#TouchInfo', {
					freeMode: false,
					freeModeMomentumRatio: 0.5,
					slidesPerView: 'auto',
					onInit: function(e){
						var H = $(".fall-box").eq(e.activeIndex).height();
						$("#TouchInfo .swiper-slide.swiper-slide-active").css('height', H + 'px');
						$("#TouchInfo .swiper-wrapper").css('height', H + 'px');
					},
					onSlideChangeEnd: function(e){
						$("#TouchNav .active").removeClass('active');
						$("#TouchNav .swiper-slide").eq(e.activeIndex).addClass('active');
						TouchNav.slideTo(e.activeIndex);
						var H = $(".fall-box").eq(e.activeIndex).height();
						$("#TouchInfo .swiper-slide.swiper-slide-active").css('height', H + 'px');
						$("#TouchInfo .swiper-wrapper").css('height', H + 'px');
					}
				});
				
				
				//详情底部加入购物车
				$('.cartbox').click(function(){
					var num = $(".cartitemcount").html();//获取数量 
			    	$(".cartitemcount").html(num*1+1); 
			    	Elastic("ElasticClass","<i class=\"iconfont\" style=\"vertical-align: middle;margin-right:0.1rem;\">&#xe640;</i>成功加入购物车",2000);
				})
				
				//详情底部加入收藏
				$('.mui-item-collect').click(function(){
					var followButton = $(this);
						if (followButton.hasClass("following")){       
			            followButton.removeClass("following");       
			            followButton.html('&#xe623;');
			            followButton.css({'font-size':'0.4rem','color':'#606060'});
			            followButton.attr('data-text','收藏');
			        }else{
			            followButton.addClass("following");  
			            followButton.html('&#xe602;'); 
			            followButton.css({'font-size':'0.4rem','color':'#FA4A66'});
			            followButton.attr('data-text','已收藏');
			        }
				})
			
			})
			
			function floor(fixedevery,louceng) {
			    this.fixedevery = fixedevery;
			    this.louceng = louceng;
			}
			
			floor.prototype = {
			    init: function () {
			        var that = this;
			        that.start();
			        this.fixedeveryClick();
			    },
			    start: function () {
			        var that = this;
			        $(window).on('scroll',function(){
			            var winH=$(window).height();
			            var iTop = $(window).scrollTop() || window.pageYOffset;//鼠标滚动的距离			            
			            var header=$("header").height();
			            var v = $(window).scrollTop()/100;
			            if(iTop>header){
			                $(that.louceng).each(function(){
			                    if(winH+iTop - $(this).offset().top>winH/2){			  
			                        $(that.fixedevery).removeClass('currentitem').css("border-bottom","0");
			                        $(that.fixedevery).eq($(this).index()).addClass('currentitem').css("border-bottom","1px solid rgba(255,255,255,"+v+")");			                    	
			                    }
			                })
			                
			            }
			            
			        });
			        $(window).on('load',function(){
			            var winH=$(window).height();
			            var iTop = $(window).scrollTop();//鼠标滚动的距离
			            var header=$("#wineHead").height();
			            if(iTop>0){
			                $(that.louceng).each(function(){
			                    if(winH+iTop - $(this).offset().top>winH/2){
			                        $(that.fixedevery).removeClass('currentitem');
			                        $(that.fixedevery).eq($(this).index()).addClass('currentitem');
			                    }
			                })
			            }
			            $('.headIconPic').css("color","#999999");
			        });
			    },
			    fixedeveryClick: function () {
			        var that = this;
			        $(that.fixedevery).click(function(){
			            var t = $(that.louceng).eq($(this).index()).offset().top - 50;
			            $('body,html').animate({"scrollTop":t},500);
			        });
			
			    }
			
			}
			
			
			// 查看大图
			function bigImg(res) {
				var big_img = `<div class="big_img" onclick="closeDialogImg(this)">
				    <div class="swiper-container2">
				      <div class="swiper-wrapper"></div>
				    </div>
				    <div class="swiper-pagination2"></div>				    
				</div>`;
				$("body").append(big_img);
				var mySwiper = new Swiper('.swiper-container2', {
					loop: false,
					pagination: '.swiper-pagination2',
					paginationType: 'fraction'
				});
				var imgSrc = $(res).data("src");
				var imgBox = $(res).parent().children();
				var i = $(imgBox).index(res);
				$(".big_img .swiper-wrapper").empty();
				$(".big_img").css({
					"z-index": 1001,
					"opacity": "1",
					"transition": "0.5s all ease-in"
				});

				for(var j = 0, c = imgBox.length; j < c; j++) {
					$(".big_img .swiper-wrapper").append(`<div class="swiper-slide">
		        		<div class="cell">
		        			<img src=${imgBox.eq(j).data("src")} />
		        		</div>
	        		</div>`);
					mySwiper.updateSlidesSize();
					mySwiper.updatePagination();

					$(".big_img .cell img").animate({
						width: $(window).width()
					}, 500)
					mySwiper.slideTo(i, 0, false);

				}

				return false;
			}

			// 关闭大图
			function closeDialogImg(res) {
				$(".big_img .cell img").animate({
					width: 0
				}, 500)
				$(".big_img").css({
					"z-index": "-1",
					"opacity": "0",
					"transition": "0.5s all ease-in"
				});
				setTimeout(()=>{					
					$(res).remove();
				},500)
			}
			
			//添加评论
			function addComment(res){
				$.modal({
				  	title: "添加评论",
				  	text: `<div class="textarea" id="addComment" contenteditable="true"></div>`,
				  	buttons: [
				    	{ 
				    		text: "取消", className: "default", onClick: function(){
				    
				    		} 
				    	},
				    	{	text: "保存", onClick: function(){ 
				    			$(res).text($("#addComment").text());
				    		} 
				    	}
				  ]
				});
			}
			
			
			function getComment(){
				window.location.href='gradeItem.html'
			}
			//打开评价列表
			function openGradeList(){
				window.location.href='communityList.html'
			}
			
			//点赞
			function getThumbs(res){
				var num = $(res).children('span').text();
				var followButton = $(res);
				if(followButton.hasClass("following")) {
					followButton.removeClass("following");
					$(res).children('i').html("&#xe67f;");
					num--;
					$(res).children('span').text(num);
				} else {
					followButton.addClass("following");
					$(res).children('i').html("&#xe67e;");
					num++;
					$(res).children('span').text(num);
				}
				
			}
					
			
		</script>-->
	</body>

</html>